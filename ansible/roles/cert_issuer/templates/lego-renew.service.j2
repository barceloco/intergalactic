[Unit]
Description=Lego Certificate Renewal
Documentation=https://go-acme.github.io/lego/
After=docker.service
Requires=docker.service

[Service]
Type=oneshot
ExecStart={{ cert_issuer_config_dir }}/lego-renew.sh
StandardOutput=journal
StandardError=journal
SyslogIdentifier=lego-renew

# Security hardening
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths={{ cert_issuer_config_dir }} {{ edge_ingress_data_dir }}/certs

# Resource limits
MemoryMax=512M
CPUQuota=50%
